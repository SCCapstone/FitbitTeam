"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var lodash_1 = require("lodash");
function getFirstUserEmail(user, address) {
    // Pick the first email if we weren't passed an email
    if (!address) {
        if (user.emails && user.emails[0]) {
            address = user.emails[0].address;
        }
        else {
            throw new Error("User doesn't have an email address");
        }
    }
    var validAddresses = lodash_1.map(user.emails, 'address');
    var addressIsValid = lodash_1.includes(validAddresses, address);
    if (!addressIsValid) {
        throw new Error('No such email address for user');
    }
    return address;
}
exports.getFirstUserEmail = getFirstUserEmail;
//# sourceMappingURL=get-first-user-email.js.map